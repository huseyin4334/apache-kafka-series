server.port=0
spring.kafka.producer.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all

spring.kafka.producer.properties.delivery.timeout.ms=120000
spring.kafka.producer.properties.linger.ms=0
spring.kafka.producer.properties.request.timeout.ms=30000

spring.kafka.producer.properties.max.in.flight.requests.per.connection=5
spring.kafka.producer.properties.enable.idempotence=true

withdraw-money-topic=withdraw-money-topic
deposit-money-topic=deposit-money-topic


# enable kafka transaction
# Normally, <prefix>-1, <prefix>-2, etc. are generated by the producer for each transaction.
# We added a random value to the prefix to avoid conflicts between multiple instances of the service.
# Because, if server crashed and get restarted, it will see our transaction id, and it will try to resume the transaction or rollback the transaction.
# Transaction id prefix is
spring.kafka.producer.transaction-id-prefix=transfer-service-${random.value}-

# let's trace the transaction
# kafka.transaction will trace when the transaction is started, committed, and rolled back.
# spring.transaction will trace when the transaction is started, committed, and rolled back.
# Differences between kafka.transaction and spring.transaction are: kafka.transaction will trace the transaction id, and spring.transaction will trace the transaction name.
#logging.level.org.springframework.kafka.transaction=TRACE
#logging.level.org.springframework.transaction=TRACE


# kafkaTemplate internal transaction manager and springframework transaction manager are different.
# kafkaTemplate internal transaction manager is used for kafka transaction.
# springframework transaction manager is used for spring transaction.
logging.level.org.apache.kafka.clients.producer.internals.TransactionManager=TRACE
logging.level.org.springframework.kafka.transaction.KafkaTransactionManager=TRACE